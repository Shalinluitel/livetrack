<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Personal Finance Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        /* Color Palette */
        --primary-brand: #4ade80;
        --primary-brand-secondary: #22c55e;
        --accent: #fbbf24;
        --bg-primary: #0f172a;
        --bg-secondary: #1e293b;
        --bg-tertiary: #334155;
        --bg-card: #1e293b;
        --text-primary: #ffffff;
        --text-secondary: #94a3b8;
        --text-muted: #64748b;
        --text-accent: #4ade80;
        --status-success: #10b981;
        --status-warning: #f59e0b;
        --status-error: #ef4444;
        --status-info: #3b82f6;
        --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.15);
        --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.2);
        --shadow-glow: 0 0 20px rgba(74, 222, 128, 0.3);
        /* Typography */
        --font-primary:
          "SF Pro Display", -apple-system, BlinkMacSystemFont, system-ui;
        --font-size-xs: 12px;
        --font-size-sm: 14px;
        --font-size-base: 16px;
        --font-size-lg: 18px;
        --font-size-xl: 20px;
        --font-size-2xl: 24px;
        --font-size-3xl: 32px;
        --font-size-4xl: 36px;
        --font-weight-light: 300;
        --font-weight-regular: 400;
        --font-weight-medium: 500;
        --font-weight-semibold: 600;
        --font-weight-bold: 700;
        /* Spacing */
        --spacing-xs: 4px;
        --spacing-sm: 8px;
        --spacing-md: 12px;
        --spacing-lg: 16px;
        --spacing-xl: 20px;
        --spacing-2xl: 24px;
        --spacing-3xl: 32px;
        --spacing-4xl: 40px;
        --spacing-5xl: 48px;
        /* Border Radius */
        --radius-sm: 6px;
        --radius-md: 12px;
        --radius-lg: 16px;
        --radius-xl: 20px;
        --radius-2xl: 24px;
        --radius-full: 9999px;
        /* Transition */
        --transition: all 0.2s ease;
      }
      body {
        background: var(--bg-primary);
        color: var(--text-primary);
        font-family: var(--font-primary);
        margin: 0;
        min-height: 100vh;
        padding: var(--spacing-lg);
        box-sizing: border-box;
      }
      .dashboard-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--spacing-xl) var(--spacing-lg);
        margin-bottom: var(--spacing-lg);
      }
      .dashboard-title {
        font-size: var(--font-size-2xl);
        font-weight: var(--font-weight-bold);
        color: var(--text-primary);
      }
      .quick-actions {
        display: flex;
        gap: var(--spacing-md);
      }
      .btn {
        border: none;
        border-radius: var(--radius-md);
        font-weight: var(--font-weight-medium);
        font-size: var(--font-size-base);
        padding: var(--spacing-md) var(--spacing-xl);
        background: var(--primary-brand);
        color: var(--bg-primary);
        cursor: pointer;
        transition: var(--transition);
      }
      .btn.secondary {
        background: var(--bg-tertiary);
        color: var(--text-primary);
      }
      .btn:hover {
        background: var(--primary-brand-secondary);
      }
      .dashboard-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: var(--spacing-lg);
      }
      @media (min-width: 700px) {
        .dashboard-grid {
          grid-template-columns: 1fr 1fr;
        }
      }
      @media (min-width: 1100px) {
        .dashboard-grid {
          grid-template-columns: 1fr 1fr 1fr;
        }
      }
      .card {
        background: var(--bg-card);
        border-radius: var(--radius-lg);
        padding: var(--spacing-lg);
        box-shadow: var(--shadow-md);
        display: flex;
        flex-direction: column;
        gap: var(--spacing-md);
      }
      .card-title {
        font-size: var(--font-size-lg);
        font-weight: var(--font-weight-semibold);
        color: var(--text-secondary);
      }
      .card-value {
        font-size: var(--font-size-3xl);
        font-weight: var(--font-weight-bold);
        color: var(--primary-brand);
      }
      .card-sub {
        font-size: var(--font-size-sm);
        color: var(--text-muted);
      }
      .progress-bar {
        width: 100%;
        height: 8px;
        background: var(--bg-tertiary);
        border-radius: var(--radius-full);
        overflow: hidden;
        margin-top: var(--spacing-xs);
      }
      .progress-bar-fill {
        height: 100%;
        background: var(--primary-brand);
        border-radius: var(--radius-full);
        transition: width 0.3s ease;
      }
      .income-real-time {
        font-size: var(--font-size-xl);
        color: var(--accent);
        font-weight: var(--font-weight-bold);
        margin-top: var(--spacing-sm);
      }
      .nav-bar {
        position: fixed;
        left: var(--spacing-lg);
        right: var(--spacing-lg);
        bottom: var(--spacing-lg);
        background: var(--bg-card);
        border-radius: var(--radius-xl);
        box-shadow: var(--shadow-md);
        display: flex;
        justify-content: space-around;
        padding: var(--spacing-md) var(--spacing-lg);
        z-index: 100;
      }
      .nav-item {
        padding: var(--spacing-md);
        border-radius: var(--radius-md);
        color: var(--text-secondary);
        transition: var(--transition);
        cursor: pointer;
      }
      .nav-item.active,
      .nav-item:hover {
        background: var(--primary-brand);
        color: var(--bg-primary);
      }
      .screen {
        display: none;
      }
      .screen.active {
        display: block;
      }
      .transactions-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--spacing-lg);
      }
      .transactions-title {
        font-size: var(--font-size-2xl);
        font-weight: var(--font-weight-bold);
        color: var(--text-primary);
      }
      .transaction-item {
        background: var(--bg-card);
        border-radius: var(--radius-md);
        padding: var(--spacing-lg);
        margin-bottom: var(--spacing-md);
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: var(--shadow-md);
        transition: var(--transition);
      }
      .transaction-item:hover {
        box-shadow: var(--shadow-lg);
      }
      .transaction-details {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-xs);
      }
      .transaction-description {
        font-size: var(--font-size-base);
        font-weight: var(--font-weight-medium);
        color: var(--text-primary);
      }
      .transaction-category {
        font-size: var(--font-size-sm);
        color: var(--text-secondary);
      }
      .transaction-date {
        font-size: var(--font-size-sm);
        color: var(--text-muted);
      }
      .transaction-amount {
        font-size: var(--font-size-lg);
        font-weight: var(--font-weight-bold);
      }
      .transaction-amount.income {
        color: var(--status-success);
      }
      .transaction-amount.expense {
        color: var(--status-error);
      }
      .transaction-icon {
        width: 40px;
        height: 40px;
        border-radius: var(--radius-md);
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: var(--spacing-md);
        font-size: var(--font-size-lg);
      }
      .transaction-icon.income {
        background: var(--status-success);
        color: var(--bg-primary);
      }
      .transaction-icon.expense {
        background: var(--status-error);
        color: var(--text-primary);
      }
      .transaction-icon.transfer {
        background: var(--status-info);
        color: var(--text-primary);
      }
      .transaction-left {
        display: flex;
        align-items: center;
      }
      .filter-buttons {
        display: flex;
        gap: var(--spacing-sm);
        margin-bottom: var(--spacing-lg);
      }
      .filter-btn {
        padding: var(--spacing-sm) var(--spacing-md);
        border: none;
        border-radius: var(--radius-md);
        background: var(--bg-tertiary);
        color: var(--text-secondary);
        font-size: var(--font-size-sm);
        cursor: pointer;
        transition: var(--transition);
      }
      .filter-btn.active {
        background: var(--primary-brand);
        color: var(--bg-primary);
      }
      .filter-btn:hover {
        background: var(--primary-brand-secondary);
        color: var(--bg-primary);
      }
      .bank-account-card {
        background: var(--bg-card);
        border-radius: var(--radius-lg);
        padding: var(--spacing-lg);
        margin-bottom: var(--spacing-lg);
        box-shadow: var(--shadow-md);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .bank-account-info {
        display: flex;
        align-items: center;
        gap: var(--spacing-lg);
      }
      .bank-logo {
        width: 48px;
        height: 48px;
        border-radius: var(--radius-md);
        background: var(--primary-brand);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: var(--font-size-xl);
        color: var(--bg-primary);
        font-weight: var(--font-weight-bold);
      }
      .bank-details h3 {
        margin: 0 0 var(--spacing-xs) 0;
        font-size: var(--font-size-lg);
        color: var(--text-primary);
      }
      .bank-details p {
        margin: 0;
        font-size: var(--font-size-sm);
        color: var(--text-secondary);
      }
      .bank-balance {
        text-align: right;
      }
      .balance-amount {
        font-size: var(--font-size-xl);
        font-weight: var(--font-weight-bold);
        color: var(--primary-brand);
        margin: 0;
      }
      .sync-status {
        font-size: var(--font-size-sm);
        color: var(--status-success);
        margin: var(--spacing-xs) 0 0 0;
      }
      .connect-bank-card {
        background: var(--bg-card);
        border: 2px dashed var(--bg-tertiary);
        border-radius: var(--radius-lg);
        padding: var(--spacing-4xl);
        text-align: center;
        margin-bottom: var(--spacing-lg);
        transition: var(--transition);
        cursor: pointer;
      }
      .connect-bank-card:hover {
        border-color: var(--primary-brand);
        background: rgba(74, 222, 128, 0.05);
      }
      .connect-icon {
        font-size: var(--font-size-4xl);
        margin-bottom: var(--spacing-md);
      }
      .plaid-search {
        width: 100%;
        padding: var(--spacing-md);
        border: 1px solid var(--bg-tertiary);
        border-radius: var(--radius-md);
        background: var(--bg-secondary);
        color: var(--text-primary);
        font-size: var(--font-size-base);
        margin-bottom: var(--spacing-lg);
      }
      .bank-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: var(--spacing-md);
        margin-bottom: var(--spacing-lg);
      }
      .bank-option {
        background: var(--bg-card);
        border: 1px solid var(--bg-tertiary);
        border-radius: var(--radius-md);
        padding: var(--spacing-lg);
        text-align: center;
        cursor: pointer;
        transition: var(--transition);
      }
      .bank-option:hover {
        border-color: var(--primary-brand);
        box-shadow: var(--shadow-md);
      }
      .investment-summary {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: var(--spacing-lg);
        margin-bottom: var(--spacing-2xl);
      }
      .investment-card {
        background: var(--bg-card);
        border-radius: var(--radius-lg);
        padding: var(--spacing-lg);
        box-shadow: var(--shadow-md);
      }
      .investment-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--spacing-2xl);
      }
      .add-investment-form {
        background: var(--bg-card);
        border-radius: var(--radius-lg);
        padding: var(--spacing-lg);
        margin-bottom: var(--spacing-lg);
        display: none;
      }
      .add-investment-form.active {
        display: block;
      }
      .form-group {
        margin-bottom: var(--spacing-lg);
      }
      .form-group label {
        display: block;
        margin-bottom: var(--spacing-sm);
        color: var(--text-secondary);
        font-weight: var(--font-weight-medium);
      }
      .form-group input,
      .form-group select {
        width: 100%;
        padding: var(--spacing-md);
        border: 1px solid var(--bg-tertiary);
        border-radius: var(--radius-md);
        background: var(--bg-secondary);
        color: var(--text-primary);
        font-size: var(--font-size-base);
        box-sizing: border-box;
      }
      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--spacing-lg);
      }
      .investment-item {
        background: var(--bg-card);
        border-radius: var(--radius-md);
        padding: var(--spacing-lg);
        margin-bottom: var(--spacing-md);
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: var(--shadow-md);
      }
      .investment-details {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
      }
      .investment-icon {
        width: 40px;
        height: 40px;
        border-radius: var(--radius-md);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: var(--font-size-lg);
        background: var(--primary-brand);
        color: var(--bg-primary);
      }
      .investment-info h4 {
        margin: 0 0 var(--spacing-xs) 0;
        color: var(--text-primary);
      }
      .investment-info p {
        margin: 0;
        font-size: var(--font-size-sm);
        color: var(--text-secondary);
      }
      .investment-performance {
        text-align: right;
      }
      .performance-value {
        font-size: var(--font-size-lg);
        font-weight: var(--font-weight-bold);
        margin: 0;
      }
      .performance-change {
        font-size: var(--font-size-sm);
        margin: var(--spacing-xs) 0 0 0;
      }
      .performance-gain {
        color: var(--status-success);
      }
      .performance-loss {
        color: var(--status-error);
      }
      .section-title {
        font-size: var(--font-size-xl);
        font-weight: var(--font-weight-bold);
        color: var(--text-primary);
        margin-bottom: var(--spacing-lg);
      }
    </style>
  </head>
  <body>
    <!-- Dashboard Screen -->
    <div id="dashboard-screen" class="screen active">
      <header class="dashboard-header">
        <div class="dashboard-title">Net Worth Dashboard</div>
        <div class="quick-actions">
          <button class="btn" onclick="alert('Add Transaction')">
            + Add Transaction
          </button>
          <button class="btn secondary" onclick="alert('View Reports')">
            View Reports
          </button>
        </div>
      </header>
      <main>
        <div class="dashboard-grid">
          <div class="card">
            <div class="card-title">Net Worth</div>
            <div class="card-value" id="netWorth">$0</div>
            <div class="card-sub">Assets - Liabilities</div>
          </div>
          <div class="card">
            <div class="card-title">Real-Time Income</div>
            <div class="income-real-time" id="realTimeIncome">$0.00</div>
            <div class="card-sub">Earnings since 9:00 AM</div>
          </div>
          <div class="card">
            <div class="card-title">Monthly Savings Rate</div>
            <div class="card-value" id="savingsRate">0%</div>
            <div class="progress-bar">
              <div
                class="progress-bar-fill"
                id="savingsProgress"
                style="width: 0%"
              ></div>
            </div>
            <div class="card-sub">Goal: 20%</div>
          </div>
          <div class="card">
            <div class="card-title">Total Assets</div>
            <div class="card-value" id="assets">$0</div>
            <div class="card-sub">Bank, Investments, Cash</div>
          </div>
          <div class="card">
            <div class="card-title">Total Liabilities</div>
            <div class="card-value" id="liabilities">$0</div>
            <div class="card-sub">Loans, Credit Cards</div>
          </div>
          <div class="card">
            <div class="card-title">Spending This Month</div>
            <div class="card-value" id="spending">$0</div>
            <div class="card-sub">
              Compared to last month: <span id="spendingChange">0%</span>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Transactions Screen -->
    <div id="transactions-screen" class="screen">
      <header class="transactions-header">
        <div class="transactions-title">Recent Transactions</div>
        <div class="quick-actions">
          <button class="btn" onclick="alert('Add Transaction')">
            + Add Transaction
          </button>
        </div>
      </header>
      <div class="filter-buttons">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="income">Income</button>
        <button class="filter-btn" data-filter="expense">Expenses</button>
        <button class="filter-btn" data-filter="transfer">Transfers</button>
      </div>
      <main>
        <div id="transactions-list">
          <!-- Transactions will be dynamically populated here -->
        </div>
      </main>
    </div>

    <!-- Bank Accounts Screen -->
    <div id="bank-accounts-screen" class="screen">
      <header class="transactions-header">
        <div class="transactions-title">Connected Bank Accounts</div>
        <div class="quick-actions">
          <button class="btn" onclick="toggleConnectBank()">
            + Connect Account
          </button>
        </div>
      </header>

      <div id="connect-bank-interface" style="display: none">
        <div class="card">
          <h3>Connect Your Bank Account</h3>
          <p
            style="
              color: var(--text-secondary);
              margin-bottom: var(--spacing-lg);
            "
          >
            Securely connect your bank account to automatically track income and
            expenses in real-time.
          </p>

          <input
            type="text"
            class="plaid-search"
            placeholder="Search for your bank..."
            id="bank-search"
          />

          <div class="bank-list">
            <div class="bank-option" onclick="connectBank('Chase Bank')">
              <div style="font-size: 24px; margin-bottom: 8px">üè¶</div>
              <div>Chase Bank</div>
            </div>
            <div class="bank-option" onclick="connectBank('Bank of America')">
              <div style="font-size: 24px; margin-bottom: 8px">üèõÔ∏è</div>
              <div>Bank of America</div>
            </div>
            <div class="bank-option" onclick="connectBank('Wells Fargo')">
              <div style="font-size: 24px; margin-bottom: 8px">üêé</div>
              <div>Wells Fargo</div>
            </div>
            <div class="bank-option" onclick="connectBank('Capital One')">
              <div style="font-size: 24px; margin-bottom: 8px">üí≥</div>
              <div>Capital One</div>
            </div>
            <div class="bank-option" onclick="connectBank('Citi Bank')">
              <div style="font-size: 24px; margin-bottom: 8px">üè¢</div>
              <div>Citi Bank</div>
            </div>
            <div class="bank-option" onclick="connectBank('US Bank')">
              <div style="font-size: 24px; margin-bottom: 8px">üá∫üá∏</div>
              <div>US Bank</div>
            </div>
          </div>

          <button class="btn secondary" onclick="toggleConnectBank()">
            Cancel
          </button>
        </div>
      </div>

      <main>
        <div id="connected-accounts">
          <!-- Connected accounts will be populated here -->
        </div>

        <div
          id="no-accounts"
          class="connect-bank-card"
          onclick="toggleConnectBank()"
        >
          <div class="connect-icon">üè¶</div>
          <h3>Connect Your First Bank Account</h3>
          <p style="color: var(--text-secondary)">
            Securely link your bank account using Plaid to automatically track
            your income and expenses in real-time.
          </p>
        </div>
      </main>
    </div>

    <!-- Investments Screen -->
    <div id="investments-screen" class="screen">
      <header class="investment-header">
        <div class="transactions-title">Investment Portfolio</div>
        <div class="quick-actions">
          <button class="btn" onclick="toggleAddInvestment()">
            + Add Investment
          </button>
        </div>
      </header>

      <div class="investment-summary">
        <div class="investment-card">
          <div class="card-title">Total Portfolio Value</div>
          <div class="card-value" id="portfolio-value">$0</div>
          <div class="card-sub">Across all investments</div>
        </div>
        <div class="investment-card">
          <div class="card-title">Total Gain/Loss</div>
          <div class="card-value" id="portfolio-change">$0</div>
          <div class="card-sub">Since inception</div>
        </div>
        <div class="investment-card">
          <div class="card-title">Portfolio Diversity</div>
          <div class="card-value" id="portfolio-diversity">0</div>
          <div class="card-sub">Asset types</div>
        </div>
      </div>

      <div id="add-investment-form" class="add-investment-form">
        <h3>Add New Investment</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="investment-symbol">Symbol/Name</label>
            <input
              type="text"
              id="investment-symbol"
              placeholder="e.g., AAPL, Bitcoin"
            />
          </div>
          <div class="form-group">
            <label for="investment-type">Asset Type</label>
            <select id="investment-type">
              <option value="stock">Stock</option>
              <option value="etf">ETF</option>
              <option value="crypto">Cryptocurrency</option>
              <option value="bond">Bond</option>
              <option value="real-estate">Real Estate</option>
              <option value="commodity">Commodity</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="investment-shares">Shares/Quantity</label>
            <input
              type="number"
              id="investment-shares"
              placeholder="0"
              step="0.001"
            />
          </div>
          <div class="form-group">
            <label for="investment-price">Purchase Price</label>
            <input
              type="number"
              id="investment-price"
              placeholder="0.00"
              step="0.01"
            />
          </div>
        </div>
        <div class="form-group">
          <label for="investment-date">Purchase Date</label>
          <input type="date" id="investment-date" />
        </div>
        <div style="display: flex; gap: var(--spacing-md)">
          <button class="btn" onclick="addInvestment()">Add Investment</button>
          <button class="btn secondary" onclick="toggleAddInvestment()">
            Cancel
          </button>
        </div>
      </div>

      <main>
        <div class="section-title">Your Investments</div>
        <div id="investments-list">
          <!-- Investments will be populated here -->
        </div>
      </main>
    </div>
    <nav class="nav-bar">
      <div class="nav-item active" data-screen="dashboard">Dashboard</div>
      <div class="nav-item" data-screen="transactions">Transactions</div>
      <div class="nav-item" data-screen="bank-accounts">Bank Accounts</div>
      <div class="nav-item" data-screen="investments">Investments</div>
      <div class="nav-item" data-screen="settings">Settings</div>
    </nav>
    <script>
      // Sample Data
      const sampleData = {
        assets: 25000,
        liabilities: 8000,
        monthlyIncome: 4000,
        monthlySpending: 2200,
        lastMonthSpending: 2100,
        savingsGoal: 0.2, // 20%
        hourlyRate: 10,
        workStart: "09:00",
        workEnd: "17:00",
      };

      // Sample Transaction Data (sorted by date, newest first)
      const sampleTransactions = [
        {
          id: 1,
          description: "Salary Payment",
          category: "Income",
          amount: 4000,
          type: "income",
          date: "2025-06-25",
          icon: "üí∞",
        },
        {
          id: 2,
          description: "Grocery Shopping",
          category: "Food & Dining",
          amount: -125.5,
          type: "expense",
          date: "2025-06-24",
          icon: "üõí",
        },
        {
          id: 3,
          description: "Coffee Shop",
          category: "Food & Dining",
          amount: -4.25,
          type: "expense",
          date: "2025-06-24",
          icon: "‚òï",
        },
        {
          id: 4,
          description: "Gas Station",
          category: "Transportation",
          amount: -45.0,
          type: "expense",
          date: "2025-06-23",
          icon: "‚õΩ",
        },
        {
          id: 5,
          description: "Investment Transfer",
          category: "Investments",
          amount: -500,
          type: "transfer",
          date: "2025-06-22",
          icon: "üìà",
        },
        {
          id: 6,
          description: "Freelance Project",
          category: "Side Income",
          amount: 750,
          type: "income",
          date: "2025-06-21",
          icon: "üíª",
        },
        {
          id: 7,
          description: "Netflix Subscription",
          category: "Entertainment",
          amount: -15.99,
          type: "expense",
          date: "2025-06-20",
          icon: "üì∫",
        },
        {
          id: 8,
          description: "Electric Bill",
          category: "Utilities",
          amount: -89.45,
          type: "expense",
          date: "2025-06-19",
          icon: "‚ö°",
        },
        {
          id: 9,
          description: "Amazon Purchase",
          category: "Shopping",
          amount: -67.23,
          type: "expense",
          date: "2025-06-18",
          icon: "üì¶",
        },
        {
          id: 10,
          description: "Bank Transfer",
          category: "Transfer",
          amount: -200,
          type: "transfer",
          date: "2025-06-17",
          icon: "üè¶",
        },
      ];

      // Sample Bank Accounts Data
      let connectedBankAccounts = [
        {
          id: 1,
          bankName: "Chase Bank",
          accountType: "Checking",
          accountNumber: "****1234",
          balance: 5420.85,
          lastSync: "Just now",
          logo: "üè¶",
        },
        {
          id: 2,
          bankName: "Capital One",
          accountType: "Savings",
          accountNumber: "****5678",
          balance: 12750.2,
          lastSync: "2 minutes ago",
          logo: "üí≥",
        },
      ];

      // Sample Investment Data
      let investments = [
        {
          id: 1,
          symbol: "AAPL",
          name: "Apple Inc.",
          type: "stock",
          shares: 25,
          purchasePrice: 150.0,
          currentPrice: 175.5,
          purchaseDate: "2025-01-15",
          icon: "üì±",
        },
        {
          id: 2,
          symbol: "BTC",
          name: "Bitcoin",
          type: "crypto",
          shares: 0.5,
          purchasePrice: 45000.0,
          currentPrice: 48500.0,
          purchaseDate: "2025-02-10",
          icon: "‚Çø",
        },
        {
          id: 3,
          symbol: "SPY",
          name: "SPDR S&P 500 ETF",
          type: "etf",
          shares: 10,
          purchasePrice: 420.0,
          currentPrice: 435.25,
          purchaseDate: "2025-03-01",
          icon: "üìà",
        },
        {
          id: 4,
          symbol: "VXUS",
          name: "Vanguard Total International Stock ETF",
          type: "etf",
          shares: 15,
          purchasePrice: 58.0,
          currentPrice: 62.1,
          purchaseDate: "2025-03-15",
          icon: "üåç",
        },
      ];

      // Navigation State
      let currentScreen = "dashboard";
      let currentFilter = "all";

      function formatCurrency(val) {
        return (
          "$" +
          Math.abs(val).toLocaleString(undefined, {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2,
          })
        );
      }

      function formatDate(dateString) {
        const date = new Date(dateString);
        const today = new Date();
        const yesterday = new Date(today);
        yesterday.setDate(yesterday.getDate() - 1);

        if (date.toDateString() === today.toDateString()) {
          return "Today";
        } else if (date.toDateString() === yesterday.toDateString()) {
          return "Yesterday";
        } else {
          return date.toLocaleDateString("en-US", {
            month: "short",
            day: "numeric",
          });
        }
      }

      function switchScreen(screenName) {
        // Hide all screens
        document.querySelectorAll(".screen").forEach((screen) => {
          screen.classList.remove("active");
        });

        // Show target screen
        const targetScreen = document.getElementById(screenName + "-screen");
        if (targetScreen) {
          targetScreen.classList.add("active");
          currentScreen = screenName;
        }

        // Update navigation
        document.querySelectorAll(".nav-item").forEach((item) => {
          item.classList.remove("active");
        });
        document
          .querySelector(`[data-screen="${screenName}"]`)
          .classList.add("active");

        // Load screen-specific content
        if (screenName === "transactions") {
          renderTransactions();
        } else if (screenName === "bank-accounts") {
          renderBankAccounts();
        } else if (screenName === "investments") {
          renderInvestments();
        }
      }

      function filterTransactions(filterType) {
        currentFilter = filterType;

        // Update filter buttons
        document.querySelectorAll(".filter-btn").forEach((btn) => {
          btn.classList.remove("active");
        });
        document
          .querySelector(`[data-filter="${filterType}"]`)
          .classList.add("active");

        renderTransactions();
      }

      function getFilteredTransactions() {
        if (currentFilter === "all") {
          return sampleTransactions;
        }
        return sampleTransactions.filter(
          (transaction) => transaction.type === currentFilter,
        );
      }

      function renderTransactions() {
        const transactionsList = document.getElementById("transactions-list");
        const filteredTransactions = getFilteredTransactions();

        if (filteredTransactions.length === 0) {
          transactionsList.innerHTML = `
            <div class="card">
              <div style="text-align: center; color: var(--text-secondary);">
                No transactions found for the selected filter.
              </div>
            </div>
          `;
          return;
        }

        transactionsList.innerHTML = filteredTransactions
          .map(
            (transaction) => `
          <div class="transaction-item">
            <div class="transaction-left">
              <div class="transaction-icon ${transaction.type}">
                ${transaction.icon}
              </div>
              <div class="transaction-details">
                <div class="transaction-description">${transaction.description}</div>
                <div class="transaction-category">${transaction.category}</div>
                <div class="transaction-date">${formatDate(transaction.date)}</div>
              </div>
            </div>
            <div class="transaction-amount ${transaction.type}">
              ${transaction.amount > 0 ? "+" : ""}${formatCurrency(transaction.amount)}
            </div>
          </div>
        `,
          )
          .join("");
      }

      // Bank Accounts Functions
      function toggleConnectBank() {
        const interface = document.getElementById("connect-bank-interface");
        interface.style.display =
          interface.style.display === "none" ? "block" : "none";
      }

      function connectBank(bankName) {
        // Simulate bank connection process
        alert(
          `Connecting to ${bankName}...\n\nThis would normally redirect to Plaid for secure authentication.`,
        );

        // Simulate successful connection
        setTimeout(() => {
          const newAccount = {
            id: connectedBankAccounts.length + 1,
            bankName: bankName,
            accountType: "Checking",
            accountNumber: `****${Math.floor(Math.random() * 9000) + 1000}`,
            balance: Math.floor(Math.random() * 10000) + 1000,
            lastSync: "Just now",
            logo: getBankLogo(bankName),
          };

          connectedBankAccounts.push(newAccount);
          renderBankAccounts();
          toggleConnectBank();

          // Update dashboard data with new account
          updateDashboardWithBankData();
        }, 1500);
      }

      function getBankLogo(bankName) {
        const logos = {
          "Chase Bank": "üè¶",
          "Bank of America": "üèõÔ∏è",
          "Wells Fargo": "üêé",
          "Capital One": "üí≥",
          "Citi Bank": "üè¢",
          "US Bank": "üá∫üá∏",
        };
        return logos[bankName] || "üè¶";
      }

      function renderBankAccounts() {
        const connectedAccountsDiv =
          document.getElementById("connected-accounts");
        const noAccountsDiv = document.getElementById("no-accounts");

        if (connectedBankAccounts.length === 0) {
          connectedAccountsDiv.style.display = "none";
          noAccountsDiv.style.display = "block";
          return;
        }

        connectedAccountsDiv.style.display = "block";
        noAccountsDiv.style.display = "none";

        connectedAccountsDiv.innerHTML = connectedBankAccounts
          .map(
            (account) => `
          <div class="bank-account-card">
            <div class="bank-account-info">
              <div class="bank-logo">${account.logo}</div>
              <div class="bank-details">
                <h3>${account.bankName}</h3>
                <p>${account.accountType} ${account.accountNumber}</p>
              </div>
            </div>
            <div class="bank-balance">
              <div class="balance-amount">${formatCurrency(account.balance)}</div>
              <div class="sync-status">‚úì Synced ${account.lastSync}</div>
            </div>
          </div>
        `,
          )
          .join("");
      }

      function updateDashboardWithBankData() {
        // Calculate total from connected accounts
        const totalBankBalance = connectedBankAccounts.reduce(
          (sum, account) => sum + account.balance,
          0,
        );

        // Update assets with bank data
        sampleData.assets = 25000 + totalBankBalance;

        // Trigger dashboard update
        if (currentScreen === "dashboard") {
          updateDashboard();
        }
      }

      // Investment Functions
      function toggleAddInvestment() {
        const form = document.getElementById("add-investment-form");
        form.classList.toggle("active");

        if (form.classList.contains("active")) {
          document.getElementById("investment-date").value = new Date()
            .toISOString()
            .split("T")[0];
        }
      }

      function addInvestment() {
        const symbol = document.getElementById("investment-symbol").value;
        const type = document.getElementById("investment-type").value;
        const shares = parseFloat(
          document.getElementById("investment-shares").value,
        );
        const price = parseFloat(
          document.getElementById("investment-price").value,
        );
        const date = document.getElementById("investment-date").value;

        if (!symbol || !shares || !price || !date) {
          alert("Please fill in all fields");
          return;
        }

        const newInvestment = {
          id: investments.length + 1,
          symbol: symbol.toUpperCase(),
          name: symbol.toUpperCase(),
          type: type,
          shares: shares,
          purchasePrice: price,
          currentPrice: price + (Math.random() * 20 - 10), // Simulate current price
          purchaseDate: date,
          icon: getInvestmentIcon(type),
        };

        investments.push(newInvestment);
        renderInvestments();
        toggleAddInvestment();

        // Clear form
        document.getElementById("investment-symbol").value = "";
        document.getElementById("investment-shares").value = "";
        document.getElementById("investment-price").value = "";
      }

      function getInvestmentIcon(type) {
        const icons = {
          stock: "üìà",
          etf: "üìä",
          crypto: "‚Çø",
          bond: "üèõÔ∏è",
          "real-estate": "üè†",
          commodity: "ü•á",
        };
        return icons[type] || "üìà";
      }

      function renderInvestments() {
        updateInvestmentSummary();

        const investmentsList = document.getElementById("investments-list");

        if (investments.length === 0) {
          investmentsList.innerHTML = `
            <div class="card" style="text-align: center; padding: var(--spacing-4xl);">
              <div style="font-size: var(--font-size-4xl); margin-bottom: var(--spacing-lg);">üìà</div>
              <h3>Start Your Investment Journey</h3>
              <p style="color: var(--text-secondary);">Add your first investment to track your portfolio performance.</p>
            </div>
          `;
          return;
        }

        investmentsList.innerHTML = investments
          .map((investment) => {
            const totalValue = investment.shares * investment.currentPrice;
            const totalCost = investment.shares * investment.purchasePrice;
            const gainLoss = totalValue - totalCost;
            const gainLossPercent = (gainLoss / totalCost) * 100;
            const isGain = gainLoss >= 0;

            return `
            <div class="investment-item">
              <div class="investment-details">
                <div class="investment-icon">${investment.icon}</div>
                <div class="investment-info">
                  <h4>${investment.symbol}</h4>
                  <p>${investment.name} ‚Ä¢ ${investment.shares} shares</p>
                  <p>Purchased: ${formatDate(investment.purchaseDate)}</p>
                </div>
              </div>
              <div class="investment-performance">
                <div class="performance-value">${formatCurrency(totalValue)}</div>
                <div class="performance-change ${isGain ? "performance-gain" : "performance-loss"}">
                  ${isGain ? "+" : ""}${formatCurrency(gainLoss)} (${gainLossPercent.toFixed(2)}%)
                </div>
              </div>
            </div>
          `;
          })
          .join("");
      }

      function updateInvestmentSummary() {
        const totalValue = investments.reduce(
          (sum, inv) => sum + inv.shares * inv.currentPrice,
          0,
        );
        const totalCost = investments.reduce(
          (sum, inv) => sum + inv.shares * inv.purchasePrice,
          0,
        );
        const totalGainLoss = totalValue - totalCost;
        const uniqueTypes = new Set(investments.map((inv) => inv.type)).size;

        document.getElementById("portfolio-value").textContent =
          formatCurrency(totalValue);

        const changeElement = document.getElementById("portfolio-change");
        changeElement.textContent =
          (totalGainLoss >= 0 ? "+" : "") + formatCurrency(totalGainLoss);
        changeElement.style.color =
          totalGainLoss >= 0 ? "var(--status-success)" : "var(--status-error)";

        document.getElementById("portfolio-diversity").textContent =
          uniqueTypes;
      }

      function updateDashboard() {
        // Net Worth
        const netWorth = sampleData.assets - sampleData.liabilities;
        document.getElementById("netWorth").textContent =
          formatCurrency(netWorth);
        document.getElementById("assets").textContent = formatCurrency(
          sampleData.assets,
        );
        document.getElementById("liabilities").textContent = formatCurrency(
          sampleData.liabilities,
        );
        // Savings Rate
        const savings = sampleData.monthlyIncome - sampleData.monthlySpending;
        const savingsRate = savings / sampleData.monthlyIncome;
        document.getElementById("savingsRate").textContent =
          Math.round(savingsRate * 100) + "%";
        document.getElementById("savingsProgress").style.width =
          Math.min(100, Math.round(savingsRate * 100)) + "%";
        // Spending
        document.getElementById("spending").textContent = formatCurrency(
          sampleData.monthlySpending,
        );
        const spendingChange =
          ((sampleData.monthlySpending - sampleData.lastMonthSpending) /
            sampleData.lastMonthSpending) *
          100;
        document.getElementById("spendingChange").textContent =
          (spendingChange > 0 ? "+" : "") + spendingChange.toFixed(1) + "%";
      }

      function updateRealTimeIncome() {
        const now = new Date();
        const today = now.toISOString().split("T")[0];
        const start = new Date(today + "T" + sampleData.workStart + ":00");
        const end = new Date(today + "T" + sampleData.workEnd + ":00");
        let earned = 0;
        if (now > start) {
          const elapsed = Math.min(now, end) - start;
          earned =
            Math.max(0, elapsed / (1000 * 60 * 60)) * sampleData.hourlyRate;
        }
        document.getElementById("realTimeIncome").textContent =
          formatCurrency(earned);
      }

      // Event Listeners
      document.addEventListener("DOMContentLoaded", function () {
        // Navigation event listeners
        document.querySelectorAll(".nav-item").forEach((item) => {
          item.addEventListener("click", function () {
            const screen = this.getAttribute("data-screen");
            if (
              screen === "dashboard" ||
              screen === "transactions" ||
              screen === "bank-accounts" ||
              screen === "investments"
            ) {
              switchScreen(screen);
            } else {
              alert(
                `${screen.charAt(0).toUpperCase() + screen.slice(1)} screen coming soon!`,
              );
            }
          });
        });

        // Filter event listeners
        document.querySelectorAll(".filter-btn").forEach((btn) => {
          btn.addEventListener("click", function () {
            const filter = this.getAttribute("data-filter");
            filterTransactions(filter);
          });
        });

        // Initialize dashboard
        updateDashboard();
        updateRealTimeIncome();
        setInterval(updateRealTimeIncome, 1000 * 60); // update every minute
      });
    </script>
  </body>
</html>
